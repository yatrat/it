!function(){'use strict';const e=document.getElementById('cityInput'),t=document.getElementById('cityList'),d=document.getElementById('daysSelect'),g=document.getElementById('generateBtn'),r=document.getElementById('itineraryResults');let n=[],i={};const c='https://cdn.jsdelivr.net/gh/yatrat/it@v2.6/data/citylist.json',o='https://cdn.jsdelivr.net/gh/yatrat/it@v2.6/data/itinerary-data.json';function a(){console.log('Travel Itinerary Tool Initialized'),l(),g&&g.addEventListener('click',u),e&&e.addEventListener('keypress',e=>{'Enter'===e.key&&u()})}document.readyState==='loading'?document.addEventListener('DOMContentLoaded',a):a();async function l(){if(!e||!t)return;try{const r=await fetch(c);n=(await r.json()).cities||[],e.addEventListener('input',function(){const r=this.value.toLowerCase().trim();t.innerHTML='';if(!r)return t.style.display='none';const a=[],l={};n.forEach(e=>{e.name.toLowerCase().includes(r)&&!l[e.name]&&(l[e.name]=!0,a.push(e))});if(a.length){a.slice(0,8).forEach(r=>{const n=document.createElement('div');n.className='yt-suggestion',n.textContent=r.name,n.addEventListener('click',()=>{e.value=r.name,e.dataset.cityId=r.id,t.innerHTML='',t.style.display='none'}),t.appendChild(n)});t.style.display='block'}else t.innerHTML='<div class="yt-suggestion">No cities found</div>',t.style.display='block'}),document.addEventListener('click',r=>{t.contains(r.target)||r.target===e||(t.style.display='none')})}catch(r){console.error('Autocomplete error:',r)}}async function s(){try{const e=await fetch(o);return i=await e.json(),i}catch(e){return console.error('Failed:',e),{cities:{}}}}async function u(){if(!e||!d||!r)return;const t=e.value.trim(),n=e.dataset.cityId||t.toLowerCase(),c=parseInt(d.value);if(!t||!c)return void f('Please select city and days','error');g&&(g.textContent='Loading...',g.disabled=!0);try{const o=await s();if(!o.cities||!o.cities[n])return void f(`No itinerary for "${t}"`,'error');const a=o.cities[n],l=[];for(let o=1;o<=c;o++){const e=a.plans[o.toString()];e&&Array.isArray(e)&&e.forEach(e=>{l.push({day:o,activity:e})})}if(0===l.length)return void f(`${c}-day plan unavailable`,'error');h(t,c,l)}catch(e){console.error('Error:',e),f('Failed to generate','error')}finally{g&&(g.textContent='Generate Plan',g.disabled=!1)}}function h(e,t,n){if(!r)return;r.innerHTML='';const i=document.createElement('div');i.className='itinerary-header',i.innerHTML=`<h3>${t}-Day Itinerary for ${e}</h3><p>${n.length} activities across ${t} days</p>`,r.appendChild(i);const c={};n.forEach(e=>{(c[e.day]||(c[e.day]=[])).push(e.activity)});for(let n=1;n<=t;n++)if(c[n]){const e=document.createElement('div');e.className='itinerary-day',e.innerHTML=`<div class="day-header"><span class="day-number">Day ${n}</span><span class="day-duration">${c[n].length} activities</span></div><ul class="day-activities">${c[n].map(e=>`<li>${e}</li>`).join('')}</ul>`,r.appendChild(e)}}function f(e,t='error'){r&&(r.innerHTML=`<div class="message ${t}">${e}</div>`)} }();
